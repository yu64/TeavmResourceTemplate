
//javaの設定
java {

    toolchain {
        //Javaのバージョンを指定
        languageVersion = JavaLanguageVersion.of(11)
    }
}

eclipse.project.name = "teavm"



task printT {

    doLast {

        println "printT"
    }
}

task teavmc(type: io.github.zebalu.gradle.teavm.TeavmCompileTask) {
	
	//出力
	settings.targetDirectory = new File("${project.buildDir}/resources/main/${teavmOutputPath}");
	
    //mainメソッドの位置
    settings.mainClass = application.mainClassName;

	//html及びjavascriptから呼び出す場合の関数名
	settings.entryPointName = "callTeavmScript";
	
	//出力ファイル名
	settings.targetFileName = 'app.js'

	doLast {
		
		println "Teavm Compiled"
	}
}

processResources.dependsOn 'teavmc'


//Java部分を除外
tasks.withType(Jar) {

    exclude("**/*.class")
}

